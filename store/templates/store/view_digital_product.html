{% extends 'store/base.html' %}
{% load static %}
{% block content %}
<div class="video-container">
    <video
        id="streamPlayer"
        class="video-js vjs-default-skin vjs-big-play-centered"
        controls
        preload="auto"
        poster="{{ product.image.url }}"
        oncontextmenu="return false";>
        <source src="{{ stream_url }}" type="video/mp4">
    </video>
</div>
{% endblock %}

{% block extra_css %}

<style>
    .video-container {
        max-width: 800px;
        margin: 0 auto;
    }

    .video-js {
        width: 100%;
        border-radius: 5px;
        background-color: #000;
    }

    .vjs-big-play-centered .vjs-big-play-button {
        font-size: 2.5em;
        background-color: rgba(0, 0, 0, 0.6);
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const player = videojs('streamPlayer', {
            controls: true,
            autoplay: false,
            preload: 'auto',
            responsive: true,
            fluid: true,
            controlBar: {
                children: [
                    'playToggle',
                    'volumePanel',
                    'currentTimeDisplay',
                    'timeDivider',
                    'durationDisplay',
                    'progressControl',
                    'fullscreenToggle',
                ],
            },
        });

        console.log('Simplified Video.js player initialized:', player);
    });
</script>

{% endblock %}
